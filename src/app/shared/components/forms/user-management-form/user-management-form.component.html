<form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
  <h2>{{ formTitle }}</h2>

  <!-- First Name Field -->
  <mat-form-field appearance="outline">
    <mat-label>First Name</mat-label>
    <input
      matInput
      oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1)"
      formControlName="firstName"
    />
    <mat-error *ngIf="userForm.get('firstName')?.hasError('required')">
      First Name is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <!-- Last Name Field -->
  <mat-form-field appearance="outline">
    <mat-label>Last Name</mat-label>
    <input
      matInput
      oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1)"
      formControlName="lastName"
    />
    <mat-error *ngIf="userForm.get('lastName')?.hasError('required')">
      Last Name is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <!-- Email Field with Edit Option -->
  <div style="display: flex; justify-content: flex-start; column-gap: 0.75rem">
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" [readonly]="!emailEditable" />
      <mat-error *ngIf="userForm.get('email')?.hasError('required')">
        Email is <strong>required</strong>
      </mat-error>
      <mat-error *ngIf="userForm.get('email')?.hasError('email')">
        <strong>Invalid</strong> email
      </mat-error>
    </mat-form-field>

    <!-- <span *ngIf="userData?.email">
      <button
        mat-stroked-button
        style="white-space: nowrap"
        (click)="toggleEmailEdit()"
        type="button"
      >
        {{ emailEditable ? "Lock Email" : "Edit Email" }}
      </button>
    </span> -->
  </div>

  <!-- Role Field -->
  <mat-form-field appearance="outline">
    <mat-label>Role</mat-label>
    <mat-select formControlName="role">
      <mat-option *ngFor="let role of roles" [value]="role">
        {{ role }}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="userForm.get('role')?.hasError('required')">
      Role is <strong>required</strong>
    </mat-error>
  </mat-form-field>

  <!-- Change Password Button -->
  <!-- <div>
    <button
      type="button"
      mat-button
      color="primary"
      (click)="togglePasswordField()"
    >
      {{ showPasswordField ? "Hide Password Field" : "Configure Password" }}
    </button>
  </div> -->

  <!-- Password Fields (Conditionally Rendered) -->

  <!-- <mat-form-field appearance="outline" *ngIf="showPasswordField">
    <mat-label>New Password</mat-label>
    <input matInput type="password" formControlName="password" />
  </mat-form-field> -->
  <div *ngIf="this.formErrMsgs">
    <mat-error *ngFor="let errorMsg of this.formErrMsgs">
      <p>
        *<strong>{{ errorMsg | titlecase }}</strong>
      </p>
    </mat-error>
  </div>

  <div class="form-actions">
    <!-- Submit Button (Always Enabled) -->
    <button mat-flat-button color="primary" type="submit">Submit</button>

    <!-- Delete User button (Enabled only in modification mode, when userData is provided) -->
    <button
      *ngIf="!userCreation"
      mat-flat-button
      type="button"
      color="warn"
      (click)="onDeleteUser()"
    >
      Delete User
    </button>
  </div>
</form>
