<div class="container">
  <form class="form" [formGroup]="resetPasswordForm" (submit)="onSubmit()">
    <h5 class="title">Reset Password</h5>
    <mat-form-field appearance="outline" hideRequiredMarker>
      <mat-label>New password</mat-label>
      <input
        type="password"
        matInput
        formControlName="newPassword"
        [type]="hide.newPassword ? 'password' : 'text'"
      />
      <mat-icon matSuffix (click)="hide.newPassword = !hide.newPassword">{{
        hide.newPassword ? "visibility_off" : "visibility"
      }}</mat-icon>
      <mat-error *ngIf="hasError('newPassword', 'required')">
        Password is required
      </mat-error>
      <mat-error *ngIf="hasError('newPassword', 'minlength')">
        Password must have at least {{ MIN_LENGTH }} characters
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" hideRequiredMarker>
      <mat-label>Confirm password</mat-label>
      <input
        type="password"
        matInput
        formControlName="confirmPassword"
        [type]="hide.confirmPassword ? 'password' : 'text'"
      />
      <mat-icon
        matSuffix
        (click)="hide.confirmPassword = !hide.confirmPassword"
        >{{ hide.confirmPassword ? "visibility_off" : "visibility" }}</mat-icon
      >
      <mat-error *ngIf="hasError('confirmPassword', 'required')">
        Confirm password is required
      </mat-error>
      <mat-error *ngIf="hasError('confirmPassword', 'passwordNoMatch')">
        Password doesn't match
      </mat-error>
    </mat-form-field>

    <div class="actions">
      <button
        type="button"
        class="cancel-btn"
        mat-button
        (click)="redirectTo('login')"
      >
        Login
      </button>
      <button
        type="submit"
        [disabled]="resetPasswordForm.invalid || isLoading()"
        mat-flat-button
        color="primary"
      >
        @if (!isLoading()) {
        <span>Submit</span>
        } @else {
        <mat-progress-spinner
          [diameter]="24"
          mode="indeterminate"
          color="primary"
        >
        </mat-progress-spinner>
        }
      </button>
    </div>
  </form>
</div>
